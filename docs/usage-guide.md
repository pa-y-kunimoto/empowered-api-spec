# プロンプトの使い方ガイド

このドキュメントでは、empowered-api-specリポジトリのプロンプトテンプレートを使用して、AIエージェントで高品質なAPI仕様書を生成する方法を説明します。

## 目次

1. [概要](#概要)
2. [プロンプトテンプレート一覧](#プロンプトテンプレート一覧)
3. [使用手順](#使用手順)
4. [カスタマイズのコツ](#カスタマイズのコツ)
5. [AIエージェントの選択](#aiエージェントの選択)
6. [出力例](#出力例)

## 概要

このリポジトリのプロンプトテンプレートは、AIエージェント（ChatGPT、Claude、GitHub Copilotなど）に入力することで、詳細で包括的なAPI仕様書を自動生成するためのものです。

### メリット

- **時間の節約**: 手動で書くと数時間かかる仕様書を数分で生成
- **品質の向上**: 包括的で一貫性のある仕様書を作成
- **標準化**: チーム全体で統一されたフォーマットを使用
- **メンテナンス性**: テンプレートベースなので更新が容易

## プロンプトテンプレート一覧

### 1. 基本的なAPI仕様書生成 (`basic-api-spec.md`)

**用途**: シンプルなRESTful APIの仕様書を生成したい場合

**適している場合**:
- 新規APIプロジェクトの初期設計段階
- 小規模なAPIの仕様書作成
- 概要レベルのドキュメントが欲しい場合

### 2. OpenAPI仕様書生成 (`openapi-spec.md`)

**用途**: OpenAPI 3.0形式の仕様書（YAML/JSON）を生成したい場合

**適している場合**:
- Swagger UIで表示したい
- 自動的にクライアントライブラリを生成したい
- 標準規格に準拠した仕様書が必要

### 3. エンドポイント詳細仕様 (`endpoint-detail.md`)

**用途**: 特定のエンドポイントについて非常に詳細な仕様を作成したい場合

**適している場合**:
- 複雑なエンドポイントの詳細ドキュメントが必要
- フロントエンド開発者向けの詳細な実装ガイドを作りたい
- 具体的なコード例が必要

### 4. エラーハンドリング仕様 (`error-handling.md`)

**用途**: API全体のエラーハンドリング戦略を定義したい場合

**適している場合**:
- エラー処理の標準化が必要
- クライアント側のエラーハンドリング実装ガイドを作りたい
- エラーコード体系を設計したい

## 使用手順

### ステップ1: テンプレートの選択

プロジェクトのニーズに合わせて、適切なテンプレートを選択します。

```bash
# テンプレートを確認
ls prompts/templates/
```

### ステップ2: テンプレートのコピーとカスタマイズ

選択したテンプレートをコピーして、自分のプロジェクト情報を記入します。

```bash
# 例：基本的なAPI仕様書のテンプレートをコピー
cp prompts/templates/basic-api-spec.md my-api-spec-prompt.md
```

テキストエディタで開いて、`[...]` で囲まれた部分を実際の情報に置き換えます。

### ステップ3: AIエージェントへの入力

カスタマイズしたプロンプトをコピーして、AIエージェントに貼り付けます。

**ChatGPT/Claude の場合**:
1. ブラウザでChatGPT/Claudeを開く
2. プロンプト全体をコピー＆ペースト
3. 送信

**GitHub Copilot Chat の場合**:
1. VSCodeでCopilot Chatを開く
2. プロンプト全体を入力
3. 必要に応じて対話的に修正

### ステップ4: 生成された仕様書の確認と調整

AIが生成した仕様書を確認し、必要に応じて修正を依頼します。

**確認ポイント**:
- すべてのエンドポイントがカバーされているか
- エラーケースが適切に記載されているか
- 例が正確で実用的か
- 認証方式が正しく説明されているか

### ステップ5: 仕様書の保存と共有

生成された仕様書を適切な形式で保存します。

```bash
# Markdownとして保存
save api-specification.md

# OpenAPI YAMLとして保存
save openapi-spec.yaml
```

## カスタマイズのコツ

### 1. 具体的な情報を提供する

AIエージェントは具体的な情報があるほど、より正確な仕様書を生成できます。

❌ **悪い例**:
```
- API名: [API名を記入]
- エンドポイント: いくつかのCRUD操作
```

✅ **良い例**:
```
- API名: E-Commerce Product Management API
- バージョン: v2.1.0
- エンドポイント: 
  - GET /products - 商品一覧取得
  - POST /products - 商品作成
  - PUT /products/{id} - 商品更新
```

### 2. 実際のデータ例を含める

リクエストやレスポンスの例を含めると、より実用的な仕様書が生成されます。

```json
// 良い例
{
  "product_id": "prod_123abc",
  "name": "Wireless Mouse",
  "price": 2999,
  "currency": "JPY",
  "stock": 150
}
```

### 3. 段階的に詳細化する

最初は概要レベルの仕様書を生成し、その後に詳細化していく方法が効果的です。

1. `basic-api-spec.md` で全体像を生成
2. `endpoint-detail.md` で個別エンドポイントを詳細化
3. `error-handling.md` でエラー処理を統一

### 4. プロジェクト固有の用語を説明する

プロジェクト特有の用語や概念がある場合は、プロンプト内で説明を追加します。

```
## 用語定義
- SKU: Stock Keeping Unit（在庫管理単位）
- バリエーション: 同一商品の色・サイズなどの違い
```

## AIエージェントの選択

### ChatGPT (GPT-4)
- **長所**: 自然な文章、豊富な説明
- **適している**: ドキュメント重視のプロジェクト
- **注意点**: コード例の正確性を確認する

### Claude
- **長所**: 長い文脈の理解、構造化された出力
- **適している**: 大規模なAPI仕様書
- **注意点**: 最新の技術トレンドについて更新が必要な場合も

### GitHub Copilot
- **長所**: IDE統合、コードとの連携
- **適している**: 実装と並行して仕様書を作成
- **注意点**: 対話的な調整が必要

## 出力例

### 基本的なAPI仕様書の出力例

生成される仕様書には以下のようなセクションが含まれます：

```markdown
# User Management API仕様書

## 概要
User Management APIは、ユーザー情報の作成、取得、更新、削除（CRUD操作）を提供します...

## 認証
本APIはJWT（JSON Web Token）を使用した認証を実装しています...

## エンドポイント

### GET /users
ユーザー一覧を取得します。

**リクエスト**
- Method: GET
- URL: /v1/users
- Headers:
  - Authorization: Bearer {token}
  
**クエリパラメータ**
| パラメータ | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| page | integer | No | ページ番号 |
...
```

### OpenAPI仕様書の出力例

```yaml
openapi: 3.0.0
info:
  title: User Management API
  version: 1.0.0
  description: ユーザー管理API

servers:
  - url: https://api.example.com/v1
    description: 本番環境

paths:
  /users:
    get:
      summary: ユーザー一覧取得
      operationId: getUsers
      tags:
        - users
      parameters:
        - name: page
          in: query
          schema:
            type: integer
...
```

## トラブルシューティング

### 問題: 生成された仕様書が不完全

**解決策**: プロンプトに追加情報を含めて再実行します。特に以下を明確にしてください：
- すべてのエンドポイントのリスト
- 各エンドポイントの目的
- データモデルの構造

### 問題: エラーレスポンスが不十分

**解決策**: `error-handling.md` テンプレートを使用して、エラー処理専用の仕様書を別途生成します。

### 問題: コード例が動作しない

**解決策**: 
1. AIに「実際に動作するコード例を生成してください」と明示的に依頼
2. 特定の言語やフレームワークを指定（例：「Node.js + axios」）
3. 生成後に実際にテストして修正

## ベストプラクティス

1. **バージョン管理**: 生成したプロンプトと仕様書をGitで管理する
2. **レビュー**: チームメンバーで生成された仕様書をレビューする
3. **継続的更新**: APIの変更に合わせてプロンプトも更新する
4. **テンプレートの改善**: 使用しながらテンプレートを改善していく

## 参考リンク

- [OpenAPI Specification](https://swagger.io/specification/)
- [REST API Design Best Practices](https://restfulapi.net/)
- [HTTP Status Codes](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status)
